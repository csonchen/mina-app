# 关于页面倒计时组件开发的思考

## 场景描述

前阵子公司的测试同学跟我说：**为什么xx页面每次进来或者返回的时候都要调一次接口，这个接口很慢，返回的时候不应该请求接口，这样很影响性能的。**

我心想也对，进来的时候请求接口了，当进入下一层页面，然后返回的话就不应该请求了，那是为什么呢？

因为页面存在倒计时计算，而倒计时的时间是从接口读取的，离开当前页面，倒计时是必须得清除掉的，原因是：

1. `js` 是 **单线程** 语言，倒计时事件会影响下一层页面主线程事件的调用 (EventLoop，这里不对此作阐述，有兴趣的同学自行搜索)

2. 本地和服务器的时间存在误差，返回页面需要重新获取服务器时间

